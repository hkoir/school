
{% extends 'base.html' %}

{% block content %}


<div class="container-fluid">
    <div class="row">      

        <form method="GET">
            <label for="class_name">Class Name:</label>
            <input type="text" id="class_name" name="class_name" value="{{ class_name }}">

            <label for="section">Section:</label>
            <input type="text" id="section" name="section" value="{{ section }}">

            <label for="academic_year">Academic Year:</label>
            <input type="text" id="academic_year" name="academic_year" value="{{ academic_year }}">

            <button type="submit">Filter</button>
        </form>

        <div class="col-12 mt-5">
            <h2 class="text-center"> GPA Result Summary</h2>
           
            <div class="container-fluid">
                <div class="row">
                    <div class="col-3">

                    </div>
                    <div class="col-6">
                       
                        <canvas id="gpaBarChart" width="400" height="200"></canvas>
                    </div>
                    <div class="col-3">
                      
                        <canvas id="gpaPieChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script>

var gpaCounts = JSON.parse('{{ gpa_counts|escapejs }}');
var gpaLabels = JSON.parse('{{ gpa_labels|escapejs }}');

// Bar Chart
var ctx = document.getElementById('gpaBarChart').getContext('2d');
var gpaBarChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: gpaLabels,
        datasets: [{
            label: 'Number of Students',
            data: gpaCounts,
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Pie Chart
var ctx2 = document.getElementById('gpaPieChart').getContext('2d');
var gpaPieChart = new Chart(ctx2, {
    type: 'pie',
    data: {
        labels: gpaLabels,
        datasets: [{
            label: 'Number of Students',
            data: gpaCounts,
            backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'],
            borderColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'],
            borderWidth: 1
        }]
    }
});
</script>


{% endblock %}